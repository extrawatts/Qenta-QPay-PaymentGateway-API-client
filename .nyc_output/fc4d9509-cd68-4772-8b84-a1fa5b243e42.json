{"/Users/ostracoda/Desktop/qenta/src/qenta.ts":{"path":"/Users/ostracoda/Desktop/qenta/src/qenta.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":103}},"10":{"start":{"line":10,"column":21},"end":{"line":10,"column":103}},"11":{"start":{"line":10,"column":72},"end":{"line":10,"column":103}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":62}},"13":{"start":{"line":13,"column":0},"end":{"line":13,"column":52}},"14":{"start":{"line":14,"column":14},"end":{"line":14,"column":38}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":22}},"16":{"start":{"line":16,"column":19},"end":{"line":16,"column":47}},"17":{"start":{"line":17,"column":15},"end":{"line":17,"column":32}},"18":{"start":{"line":18,"column":17},"end":{"line":18,"column":36}},"19":{"start":{"line":19,"column":0},"end":{"line":19,"column":55}},"20":{"start":{"line":21,"column":4},"end":{"line":21,"column":51}},"21":{"start":{"line":23,"column":0},"end":{"line":23,"column":48}},"22":{"start":{"line":24,"column":0},"end":{"line":24,"column":48}},"23":{"start":{"line":25,"column":0},"end":{"line":25,"column":48}},"24":{"start":{"line":26,"column":0},"end":{"line":26,"column":48}},"25":{"start":{"line":27,"column":0},"end":{"line":27,"column":57}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":50},"end":{"line":9,"column":51}},"loc":{"start":{"line":9,"column":71},"end":{"line":11,"column":1}},"line":9},"4":{"name":"GENERATE_MEMBER_ID","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":27}},"loc":{"start":{"line":20,"column":33},"end":{"line":22,"column":1}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"type":"binary-expr","locations":[{"start":{"line":9,"column":20},"end":{"line":9,"column":24}},{"start":{"line":9,"column":28},"end":{"line":9,"column":45}},{"start":{"line":9,"column":50},"end":{"line":11,"column":1}}],"line":9},"5":{"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":103}},"type":"if","locations":[{"start":{"line":10,"column":21},"end":{"line":10,"column":103}},{"start":{"line":10,"column":21},"end":{"line":10,"column":103}}],"line":10},"6":{"loc":{"start":{"line":10,"column":25},"end":{"line":10,"column":70}},"type":"binary-expr","locations":[{"start":{"line":10,"column":25},"end":{"line":10,"column":40}},{"start":{"line":10,"column":44},"end":{"line":10,"column":70}}],"line":10}},"s":{"0":1,"1":3,"2":3,"3":3,"4":0,"5":0,"6":0,"7":0,"8":1,"9":4,"10":3,"11":3,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1},"f":{"0":3,"1":0,"2":0,"3":4,"4":2},"b":{"0":[1,1,1],"1":[1,0],"2":[3,0],"3":[0,0],"4":[1,1,1],"5":[3,0],"6":[3,3]},"inputSourceMap":{"version":3,"file":"/Users/ostracoda/Desktop/qenta/src/qenta.ts","sources":["/Users/ostracoda/Desktop/qenta/src/qenta.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,uCAAsC;AAWpB,sBAAK;AAVvB,gDAA4C;AAC5C,iCAAmC;AACnC,qCAA6B;AAE7B,kBAAe,kBAAY,CAAC,gBAAM,CAAC,CAAA;AAEnC,SAAgB,kBAAkB,CAAC,GAAW;IAC5C,OAAO,iBAAU,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAAA;AACzC,CAAC;AAFD,gDAEC;AAID,gDAA6B;AAC7B,gDAA6B;AAC7B,gDAA6B;AAC7B,yDAAsC","sourcesContent":["import * as enums from './client.enum'\nimport WithTranable from './client/tranable'\nimport { generateID } from './util'\nimport Client from './client'\n\nexport default WithTranable(Client)\n\nexport function GENERATE_MEMBER_ID(key: string): string {\n  return generateID(key).substring(0, 60)\n}\n\nexport { enums as ENUMS }\n\nexport * from './config.type'\nexport * from './client.type'\nexport * from './client.enum'\nexport * from './client/tranable.type'\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4b117e917c4b34db6074af0b8718aa291a2eace6","contentHash":"6dee74fce96e47c691c2cdd696227de9effb17f5cb20a4c21f4a65aec5cf7b15"},"/Users/ostracoda/Desktop/qenta/src/client.enum.ts":{"path":"/Users/ostracoda/Desktop/qenta/src/client.enum.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":60}},"2":{"start":{"line":5,"column":0},"end":{"line":8,"column":68}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":35}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":45}},"5":{"start":{"line":10,"column":0},"end":{"line":13,"column":53}},"6":{"start":{"line":11,"column":4},"end":{"line":11,"column":32}},"7":{"start":{"line":12,"column":4},"end":{"line":12,"column":37}},"8":{"start":{"line":15,"column":0},"end":{"line":18,"column":44}},"9":{"start":{"line":16,"column":4},"end":{"line":16,"column":42}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":24},"end":{"line":8,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":1},"end":{"line":10,"column":2}},"loc":{"start":{"line":10,"column":19},"end":{"line":13,"column":1}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":1},"end":{"line":15,"column":2}},"loc":{"start":{"line":15,"column":16},"end":{"line":18,"column":1}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":17},"end":{"line":8,"column":66}},"type":"binary-expr","locations":[{"start":{"line":8,"column":17},"end":{"line":8,"column":36}},{"start":{"line":8,"column":41},"end":{"line":8,"column":65}}],"line":8},"1":{"loc":{"start":{"line":13,"column":12},"end":{"line":13,"column":51}},"type":"binary-expr","locations":[{"start":{"line":13,"column":12},"end":{"line":13,"column":26}},{"start":{"line":13,"column":31},"end":{"line":13,"column":50}}],"line":13},"2":{"loc":{"start":{"line":18,"column":9},"end":{"line":18,"column":42}},"type":"binary-expr","locations":[{"start":{"line":18,"column":9},"end":{"line":18,"column":20}},{"start":{"line":18,"column":25},"end":{"line":18,"column":41}}],"line":18}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":1,"1":1,"2":1},"b":{"0":[1,1],"1":[1,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/ostracoda/Desktop/qenta/src/client.enum.ts","sources":["/Users/ostracoda/Desktop/qenta/src/client.enum.ts"],"names":[],"mappings":";;;AAAA,IAAY,WAGX;AAHD,WAAY,WAAW;IACrB,8BAAe,CAAA;IACf,wCAAyB,CAAA;AAC3B,CAAC,EAHW,WAAW,GAAX,mBAAW,KAAX,mBAAW,QAGtB;AAED,IAAY,MAGX;AAHD,WAAY,MAAM;IAChB,2BAAiB,CAAA;IACjB,gCAAsB,CAAA;AACxB,CAAC,EAHW,MAAM,GAAN,cAAM,KAAN,cAAM,QAGjB;AAED,IAAY,GAGX;AAHD,WAAY,GAAG;IACb,qCAA8B,CAAA;IAC9B,qBAAc,CAAA;AAChB,CAAC,EAHW,GAAG,GAAH,WAAG,KAAH,WAAG,QAGd","sourcesContent":["export enum PaymentType {\n  CCARD = 'CCARD',\n  CCARD_MOTO = 'CCARD_MOTO',\n}\n\nexport enum Plugin  {\n  Version = '3.4.0',\n  Name = 'QentaCEE_QPay'\n}\n\nexport enum Lib  {\n  Version = 'Qenta/CheckoutPage',\n  Name = '4.2.7'\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f3f964cfacd5cdeb05e504aaacface39a2779a85","contentHash":"9f4328da29ebf6b0da8798a5506889697ce43d9df87bc6a64bcdcd4d5060d3c8"},"/Users/ostracoda/Desktop/qenta/src/client/tranable.ts":{"path":"/Users/ostracoda/Desktop/qenta/src/client/tranable.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":15},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":0},"end":{"line":35,"column":2}},"3":{"start":{"line":4,"column":28},"end":{"line":35,"column":1}},"4":{"start":{"line":6,"column":28},"end":{"line":27,"column":9}},"5":{"start":{"line":28,"column":8},"end":{"line":30,"column":11}},"6":{"start":{"line":33,"column":8},"end":{"line":33,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":18},"end":{"line":4,"column":19}},"loc":{"start":{"line":4,"column":28},"end":{"line":35,"column":1}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":33},"end":{"line":31,"column":5}},"line":5},"2":{"name":"(anonymous_2)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":32},"end":{"line":34,"column":5}},"line":32}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0},"f":{"0":1,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/ostracoda/Desktop/qenta/src/client/tranable.ts","sources":["/Users/ostracoda/Desktop/qenta/src/client/tranable.ts"],"names":[],"mappings":";;AACA,kCAA4D;AAS5D,kBAAe,CAAgC,IAAO,EAAE,EAAE,CACxD,KAAM,SAAQ,IAAI;IACT,KAAK,CAAC,gBAAgB,CAAC,IAA0B;QACtD,MAAM,WAAW,GAAG;YAClB,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,UAAU;YAClC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM;YAC1B,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ;YAC9B,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM;YAC1B,aAAa,EAAE,4BAAqB,EAAE;YACtC,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,gBAAgB,EAAE,IAAI,CAAC,gBAAgB;YACvC,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,qBAAqB,EAAE,IAAI,CAAC,qBAAqB;YACjD,iBAAiB,EAAE,IAAI,CAAC,iBAAiB;YACzC,iBAAiB,EAAE,IAAI,CAAC,iBAAiB;YACzC,iBAAiB,EAAE,IAAI,CAAC,iBAAiB;SAC1C,CAAA;QAED,OAAO,IAAI,CAAC,kBAAkB,CAA+C;YAC3E,GAAG,WAAW;SACf,CAAC,CAAA;IACJ,CAAC;IAEM,KAAK,CAAC,eAAe,CAAC,IAAyB;QACpD,OAAO,IAAI,CAAC,IAAI,CAA6C,IAAI,CAAC,CAAA;IACpE,CAAC;CACF,CAAA","sourcesContent":["import Client from '../client'\nimport { Constructor, generatePluginVersion } from '../util'\nimport {\n  entryTransactionArgs,\n  entryTransactionResult,\n  execTransactionArgs,\n  execTransactionResult,\n} from './tranable.type'\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport default <T extends Constructor<Client>>(Base: T) =>\n  class extends Base {\n    public async entryTransaction(args: entryTransactionArgs): Promise<entryTransactionResult> {\n      const defaultData = {\n        customerId: this.config.customerId,\n        shopId: this.config.shopId,\n        language: this.config.language,\n        secret: this.config.secret,\n        pluginVersion: generatePluginVersion(),\n        confirmUrl: args.confirmUrl,\n        orderReference: args.orderReference,\n        amount: args.amount,\n        currency: args.currency,\n        paymentType: args.paymentType,\n        orderDescription: args.orderDescription,\n        successUrl: args.successUrl,\n        pendingUrl: args.pendingUrl,\n        cancelUrl: args.cancelUrl,\n        failureUrl: args.failureUrl,\n        serviceUrl: args.serviceUrl,\n        consumerMerchantCrmId: args.consumerMerchantCrmId,\n        consumerIpAddress: args.consumerIpAddress,\n        consumerUserAgent: args.consumerUserAgent,\n        customerStatement: args.customerStatement,\n      }\n\n      return this.requestFingerPrint<entryTransactionArgs, entryTransactionResult>({\n        ...defaultData,\n      })\n    }\n\n    public async execTransaction(args: execTransactionArgs): Promise<execTransactionResult> {\n      return this.post<execTransactionArgs, execTransactionResult>(args)\n    }\n  }\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2b21e230ec370bece158920c91a742e1c1164d7b","contentHash":"747981ed5513d67c84f5a9ef2ce0cda6c0a870350b5748d5381f0ff4ffb42d87"},"/Users/ostracoda/Desktop/qenta/src/util.ts":{"path":"/Users/ostracoda/Desktop/qenta/src/util.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":60}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":22},"end":{"line":5,"column":46}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":109}},"5":{"start":{"line":9,"column":0},"end":{"line":9,"column":32}},"6":{"start":{"line":11,"column":20},"end":{"line":11,"column":147}},"7":{"start":{"line":12,"column":4},"end":{"line":12,"column":51}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":54}}},"fnMap":{"0":{"name":"generateID","decl":{"start":{"line":6,"column":9},"end":{"line":6,"column":19}},"loc":{"start":{"line":6,"column":25},"end":{"line":8,"column":1}},"line":6},"1":{"name":"generatePluginVersion","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":30}},"loc":{"start":{"line":10,"column":33},"end":{"line":13,"column":1}},"line":10}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":1,"6":0,"7":0,"8":1},"f":{"0":2,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/ostracoda/Desktop/qenta/src/util.ts","sources":["/Users/ostracoda/Desktop/qenta/src/util.ts"],"names":[],"mappings":";;;AAAA,mCAAmC;AACnC,+CAA4C;AAE5C,SAAgB,UAAU,CAAC,GAAW;IACpC,OAAO,GAAG,GAAG,IAAI,mBAAU,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAA;AACjG,CAAC;AAFD,gCAEC;AAED,SAAgB,qBAAqB;IACnC,MAAM,OAAO,GAAG,iBAAG,CAAC,IAAI,GAAG,GAAG,GAAG,iBAAG,CAAC,OAAO,GAAG,GAAG,GAAG,oBAAM,CAAC,IAAI,GAAG,GAAG,GAAG,oBAAM,CAAC,OAAO,CAAC;IACxF,OAAO,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AACjD,CAAC;AAHD,sDAGC","sourcesContent":["import { createHash } from 'crypto'\nimport { Lib, Plugin } from './client.enum';\n\nexport function generateID(key: string): string {\n  return `${key}-${createHash('md5').update(`${key}-${new Date().toISOString()}`).digest('hex')}`\n}\n\nexport function generatePluginVersion() {\n  const version = Lib.Name + \";\" + Lib.Version + \";\" + Plugin.Name + \";\" + Plugin.Version;\n  return Buffer.from(version).toString('base64');\n}\n\nexport type Constructor<T> = new (...args: any[]) => T;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3c46d0e9a074ab010e4db084120c31cdfdabff3d","contentHash":"2183369c112a3ee702b00efb1ff363db5542f3691f69f82e29c2b73b13ca9bbd"},"/Users/ostracoda/Desktop/qenta/src/client.ts":{"path":"/Users/ostracoda/Desktop/qenta/src/client.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":11},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":36}},"5":{"start":{"line":7,"column":22},"end":{"line":7,"column":50}},"6":{"start":{"line":10,"column":8},"end":{"line":19,"column":10}},"7":{"start":{"line":22,"column":20},"end":{"line":26,"column":10}},"8":{"start":{"line":27,"column":23},"end":{"line":27,"column":82}},"9":{"start":{"line":28,"column":8},"end":{"line":31,"column":9}},"10":{"start":{"line":29,"column":12},"end":{"line":30,"column":52}},"11":{"start":{"line":32,"column":8},"end":{"line":32,"column":22}},"12":{"start":{"line":35,"column":8},"end":{"line":35,"column":29}},"13":{"start":{"line":38,"column":23},"end":{"line":38,"column":63}},"14":{"start":{"line":39,"column":8},"end":{"line":39,"column":22}},"15":{"start":{"line":42,"column":0},"end":{"line":42,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":29},"end":{"line":20,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":21},"end":{"line":33,"column":5}},"line":21},"2":{"name":"(anonymous_2)","decl":{"start":{"line":34,"column":4},"end":{"line":34,"column":5}},"loc":{"start":{"line":34,"column":17},"end":{"line":36,"column":5}},"line":34},"3":{"name":"(anonymous_3)","decl":{"start":{"line":37,"column":4},"end":{"line":37,"column":5}},"loc":{"start":{"line":37,"column":35},"end":{"line":40,"column":5}},"line":37}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":16},"end":{"line":9,"column":27}},"type":"default-arg","locations":[{"start":{"line":9,"column":25},"end":{"line":9,"column":27}}],"line":9},"1":{"loc":{"start":{"line":28,"column":8},"end":{"line":31,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":31,"column":9}},{"start":{"line":28,"column":8},"end":{"line":31,"column":9}}],"line":28}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":7,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1},"f":{"0":7,"1":0,"2":0,"3":0},"b":{"0":[7],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/ostracoda/Desktop/qenta/src/client.ts","sources":["/Users/ostracoda/Desktop/qenta/src/client.ts"],"names":[],"mappings":";;AAAA,yBAAwB;AACxB,2CAA6C;AAC7C,qCAAqC;AAErC,qCAA+C;AAE/C,mDAAgD;AAEhD,MAAqB,MAAM;IAGzB,YAAY,SAAiB,EAAE;QAC7B,IAAI,CAAC,MAAM,GAAG;YACZ,GAAG,iBAAQ;YACX,GAAG,MAAM;YACT,GAAG,mBAAU,EAAE;YACf,IAAI,EAAE;gBACJ,GAAG,iBAAQ,CAAC,IAAI;gBAChB,GAAG,MAAM,CAAC,IAAI;gBACd,GAAG,mBAAU,EAAE,CAAC,IAAI;aACrB;SACF,CAAA;IACH,CAAC;IAEM,KAAK,CAAC,IAAI,CAAO,IAAO;QAC7B,MAAM,GAAG,GAAa,MAAM,oBAAK,CAAC,IAAI,CAAC,MAAM,CAAC,OAAiB,EAAE;YAC/D,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,EAAE,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;YAC3C,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI;SACpB,CAAC,CAAA;QAEF,MAAM,MAAM,GAAQ,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,EAAE,EAAE,EAAE,OAAO,EAAE,kBAAkB,EAAE,CAAC,CAAA;QAC/E,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YACxB,MAAM,IAAI,mBAAU,CAAC,aAAa,CAAC;gBACjC,WAAW,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,CAAA;SACtC;QAED,OAAO,MAAW,CAAA;IACpB,CAAC;IAEM,OAAO,CAAC,GAAkB;QAC/B,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAA;IACtB,CAAC;IAEM,KAAK,CAAC,kBAAkB,CAAO,IAAO;QAC3C,MAAM,MAAM,GAAQ,yBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC/C,OAAO,MAAW,CAAC;IACrB,CAAC;CACF;AAxCD,yBAwCC","sourcesContent":["import * as qs from 'qs'\nimport fetch, { Response } from 'node-fetch';\nimport { BadRequest } from './errors'\nimport { Config } from './config.type'\nimport { buildByEnv, defaults } from './config'\nimport { UnknownParams } from './client.type'\nimport { Fingerprint } from './lib/fingerpring';\n\nexport default class Client {\n  public config: Config\n\n  constructor(config: Config = {}) {\n    this.config = {\n      ...defaults,\n      ...config,\n      ...buildByEnv(),\n      http: {\n        ...defaults.http,\n        ...config.http,\n        ...buildByEnv().http\n      }\n    }\n  }\n\n  public async post<T, U>(data: T): Promise<U> {\n    const res: Response = await fetch(this.config.baseUrl as string, {\n      method: 'POST',\n      body: qs.stringify(data, { encode: false }),\n      ...this.config.http,\n    })\n\n    const parsed: any = qs.parse(await res.text(), { decoder: decodeURIComponent })\n    if (this.isError(parsed)) {\n      throw new BadRequest(`Bad Request`).\n        setResponse(res).parseError(parsed)\n    }\n\n    return parsed as U\n  }\n\n  public isError(res: UnknownParams): any {\n    return (res.message)\n  }\n\n  public async requestFingerPrint<T, U>(data: T): Promise<U> {\n    const parsed: any = Fingerprint.generate(data);\n    return parsed as U;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3b7ed8e3da526995214a7d14586bf07fe6def716","contentHash":"35a8d434807b31f6c1f854ebfef124673e27dcff84c3831b5d8c89416e7773f4"},"/Users/ostracoda/Desktop/qenta/src/errors.ts":{"path":"/Users/ostracoda/Desktop/qenta/src/errors.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":24},"end":{"line":4,"column":54}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":23}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":42}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":56}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":28}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":20}},"8":{"start":{"line":16,"column":8},"end":{"line":16,"column":62}},"9":{"start":{"line":17,"column":27},"end":{"line":17,"column":108}},"10":{"start":{"line":17,"column":54},"end":{"line":17,"column":77}},"11":{"start":{"line":17,"column":98},"end":{"line":17,"column":107}},"12":{"start":{"line":18,"column":8},"end":{"line":18,"column":34}},"13":{"start":{"line":19,"column":8},"end":{"line":19,"column":72}},"14":{"start":{"line":19,"column":49},"end":{"line":19,"column":70}},"15":{"start":{"line":20,"column":8},"end":{"line":20,"column":20}},"16":{"start":{"line":23,"column":8},"end":{"line":23,"column":47}},"17":{"start":{"line":26,"column":0},"end":{"line":26,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":25},"end":{"line":10,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":21},"end":{"line":14,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":22},"end":{"line":21,"column":5}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":17,"column":44},"end":{"line":17,"column":45}},"loc":{"start":{"line":17,"column":54},"end":{"line":17,"column":77}},"line":17},"4":{"name":"(anonymous_4)","decl":{"start":{"line":17,"column":86},"end":{"line":17,"column":87}},"loc":{"start":{"line":17,"column":98},"end":{"line":17,"column":107}},"line":17},"5":{"name":"(anonymous_5)","decl":{"start":{"line":19,"column":39},"end":{"line":19,"column":40}},"loc":{"start":{"line":19,"column":49},"end":{"line":19,"column":70}},"line":19},"6":{"name":"(anonymous_6)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":15},"end":{"line":24,"column":5}},"line":22}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/ostracoda/Desktop/qenta/src/errors.ts","sources":["/Users/ostracoda/Desktop/qenta/src/errors.ts"],"names":[],"mappings":";;;AAAA,MAAM,eAAe,GAA8B,OAAO,CAAC,qBAAqB,CAAC,CAAC;AAElF,MAAa,UAAW,SAAQ,KAAK;IAKnC,YAAY,OAAgB;QAC1B,KAAK,CAAC,OAAO,CAAC,CAAA;QACd,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAA;QAEjC,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;IACjD,CAAC;IAEM,WAAW,CAAC,GAAQ;QACzB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAA;QACnB,OAAO,IAAI,CAAA;IACb,CAAC;IAEM,UAAU,CAAC,KAAU;QAC1B,IAAI,CAAC,OAAO,GAAG,CAAC,GAAG,IAAI,GAAG,CAAS,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;QAE7D,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC;QACrG,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC;QAC1B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAA;QAC/D,OAAO,IAAI,CAAA;IACb,CAAC;IAEM,QAAQ;QACb,OAAO,GAAG,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,OAAO,EAAE,CAAA;IACxC,CAAC;CACF;AA7BD,gCA6BC","sourcesContent":["const errorDefinition: { [key: string]: string } = require('../error-codes.json');\n\nexport class BadRequest extends Error {\n  public errors: string[]\n  public errInfo: string[]\n  public response: any\n\n  constructor(message?: string) {\n    super(message)\n    this.name = this.constructor.name\n    // Capture stack trace, excluding constructor call from it.\n    Error.captureStackTrace(this, this.constructor)\n  }\n\n  public setResponse(obj: any): BadRequest {\n    this.response = obj\n    return this\n  }\n\n  public parseError(error: any): BadRequest {\n    this.errInfo = [...new Set<string>(error.message.split('.'))]\n    // clear start with \"+\" error code\n    const errorCodes = this.errInfo.map((code) => code.replace(/^\\+/, '')).filter(([_, v]) => v != null);\n    this.errInfo = errorCodes;\n    this.errors = this.errInfo.map((code) => errorDefinition[code])\n    return this\n  }\n\n  public toString(): string {\n    return `${this.name}: ${this.message}`\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6f4528288e0fe020077e1acf59bdf543f7fd9373","contentHash":"4cec98ff3168aaa75599eff164f95e771e925bdf47e14e59f5bb96a320686a1c"},"/Users/ostracoda/Desktop/qenta/src/config.ts":{"path":"/Users/ostracoda/Desktop/qenta/src/config.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":47}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":0},"end":{"line":15,"column":2}},"4":{"start":{"line":17,"column":14},"end":{"line":17,"column":16}},"5":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"6":{"start":{"line":19,"column":8},"end":{"line":19,"column":47}},"7":{"start":{"line":21,"column":4},"end":{"line":23,"column":5}},"8":{"start":{"line":22,"column":8},"end":{"line":22,"column":73}},"9":{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},"10":{"start":{"line":25,"column":8},"end":{"line":25,"column":47}},"11":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"12":{"start":{"line":28,"column":8},"end":{"line":28,"column":48}},"13":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"14":{"start":{"line":31,"column":8},"end":{"line":31,"column":45}},"15":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"16":{"start":{"line":34,"column":8},"end":{"line":34,"column":44}},"17":{"start":{"line":36,"column":4},"end":{"line":36,"column":13}},"18":{"start":{"line":38,"column":0},"end":{"line":38,"column":32}}},"fnMap":{"0":{"name":"buildByEnv","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":19}},"loc":{"start":{"line":16,"column":22},"end":{"line":37,"column":1}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},{"start":{"line":18,"column":4},"end":{"line":20,"column":5}}],"line":18},"1":{"loc":{"start":{"line":21,"column":4},"end":{"line":23,"column":5}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":23,"column":5}},{"start":{"line":21,"column":4},"end":{"line":23,"column":5}}],"line":21},"2":{"loc":{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},{"start":{"line":24,"column":4},"end":{"line":26,"column":5}}],"line":24},"3":{"loc":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},{"start":{"line":27,"column":4},"end":{"line":29,"column":5}}],"line":27},"4":{"loc":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},{"start":{"line":30,"column":4},"end":{"line":32,"column":5}}],"line":30},"5":{"loc":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},{"start":{"line":33,"column":4},"end":{"line":35,"column":5}}],"line":33}},"s":{"0":1,"1":1,"2":1,"3":1,"4":14,"5":14,"6":0,"7":14,"8":0,"9":14,"10":0,"11":14,"12":0,"13":14,"14":0,"15":14,"16":0,"17":14,"18":1},"f":{"0":14},"b":{"0":[0,14],"1":[0,14],"2":[0,14],"3":[0,14],"4":[0,14],"5":[0,14]},"inputSourceMap":{"version":3,"file":"/Users/ostracoda/Desktop/qenta/src/config.ts","sources":["/Users/ostracoda/Desktop/qenta/src/config.ts"],"names":[],"mappings":";;;AAAA,mCAAkC;AAIrB,QAAA,QAAQ,GAAW;IAC9B,OAAO,EAAE,4CAA4C;IACrD,IAAI,EAAE;QACJ,OAAO,EAAE,IAAI,GAAG,EAAE,GAAG,CAAC;QACtB,OAAO,EAAE;YACP,cAAc,EAAE,mCAAmC;YACnD,QAAQ,EAAE,mCAAmC;YAC7C,YAAY,EAAE,2EAA2E;SAC1F;KACF;CACF,CAAA;AAED,SAAgB,UAAU;IACxB,MAAM,CAAC,GAAW,EAAE,CAAA;IAEpB,IAAI,OAAO,CAAC,GAAG,CAAC,cAAc,KAAK,SAAS,EAAE;QAC5C,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,cAAc,CAAA;KACvC;IACD,IAAI,OAAO,CAAC,GAAG,CAAC,aAAa,KAAK,SAAS,EAAE;QAC3C,CAAC,CAAC,IAAI,GAAG,EAAC,GAAG,CAAC,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,EAAC,CAAC;KAChE;IACD,IAAI,OAAO,CAAC,GAAG,CAAC,WAAW,KAAK,SAAS,EAAE;QACzC,CAAC,CAAC,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,WAAW,CAAA;KACvC;IACD,IAAI,OAAO,CAAC,GAAG,CAAC,cAAc,KAAK,SAAS,EAAE;QAC5C,CAAC,CAAC,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,cAAc,CAAA;KACxC;IACD,IAAI,OAAO,CAAC,GAAG,CAAC,aAAa,KAAK,SAAS,EAAE;QAC3C,CAAC,CAAC,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,CAAA;KACrC;IACD,IAAI,OAAO,CAAC,GAAG,CAAC,YAAY,KAAK,SAAS,EAAE;QAC1C,CAAC,CAAC,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,CAAA;KACpC;IACD,OAAO,CAAC,CAAA;AACV,CAAC;AAtBD,gCAsBC","sourcesContent":["import * as process from 'process'\nimport {Config} from './config.type'\n\n\nexport const defaults: Config = {\n  baseUrl: 'https://api.qenta.com/page/init-server.php',\n  http: {\n    timeout: 1000 * 60 * 3,\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'Accept': 'application/json, text/plain, */*',\n      'User-Agent': 'QentaCEE_QPay;3.3.0;QentaCEE_Stdlib;3.0.2;Zend_Framework;1.12.16;PHP;5.2;'\n    },\n  }\n}\n\nexport function buildByEnv(): Config {\n  const c: Config = {}\n\n  if (process.env.QENTA_ENDPOINT !== undefined) {\n    c.baseUrl = process.env.QENTA_ENDPOINT\n  }\n  if (process.env.QENTA_TIMEOUT !== undefined) {\n    c.http = {...c.http, timeout: +`${process.env.QENTA_TIMEOUT}`};\n  }\n  if (process.env.CUSTOMER_ID !== undefined) {\n    c.customerId = process.env.CUSTOMER_ID\n  }\n  if (process.env.QENTA_LANGUAGE !== undefined) {\n    c.language = process.env.QENTA_LANGUAGE\n  }\n  if (process.env.QENTA_SHOP_ID !== undefined) {\n    c.shopId = process.env.QENTA_SHOP_ID\n  }\n  if (process.env.QENTA_SECRET !== undefined) {\n    c.secret = process.env.QENTA_SECRET\n  }\n  return c\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a3afb8b91eb02fdc7fbab61625a52797b791655e","contentHash":"8e9ff8d4b8b35d65d895551dff01f8a54409a603b71ab760a6110aebd6fb3e77"},"/Users/ostracoda/Desktop/qenta/src/lib/fingerpring.ts":{"path":"/Users/ostracoda/Desktop/qenta/src/lib/fingerpring.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":34}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":46}},"4":{"start":{"line":10,"column":8},"end":{"line":10,"column":46}},"5":{"start":{"line":13,"column":23},"end":{"line":13,"column":45}},"6":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"7":{"start":{"line":15,"column":12},"end":{"line":15,"column":51}},"8":{"start":{"line":17,"column":21},"end":{"line":17,"column":76}},"9":{"start":{"line":18,"column":8},"end":{"line":22,"column":11}},"10":{"start":{"line":19,"column":12},"end":{"line":21,"column":13}},"11":{"start":{"line":20,"column":16},"end":{"line":20,"column":54}},"12":{"start":{"line":23,"column":8},"end":{"line":23,"column":69}},"13":{"start":{"line":24,"column":27},"end":{"line":24,"column":49}},"14":{"start":{"line":25,"column":40},"end":{"line":27,"column":22}},"15":{"start":{"line":26,"column":25},"end":{"line":26,"column":66}},"16":{"start":{"line":28,"column":8},"end":{"line":28,"column":45}},"17":{"start":{"line":29,"column":32},"end":{"line":32,"column":9}},"18":{"start":{"line":33,"column":39},"end":{"line":36,"column":9}},"19":{"start":{"line":37,"column":8},"end":{"line":37,"column":38}},"20":{"start":{"line":40,"column":0},"end":{"line":40,"column":34}},"21":{"start":{"line":41,"column":0},"end":{"line":41,"column":39}},"22":{"start":{"line":42,"column":0},"end":{"line":42,"column":45}},"23":{"start":{"line":43,"column":0},"end":{"line":43,"column":55}},"24":{"start":{"line":44,"column":0},"end":{"line":44,"column":64}},"25":{"start":{"line":45,"column":0},"end":{"line":45,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":32},"end":{"line":8,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":44},"end":{"line":11,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":26},"end":{"line":38,"column":5}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":37},"end":{"line":18,"column":38}},"loc":{"start":{"line":18,"column":51},"end":{"line":22,"column":9}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":26,"column":17},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":25},"end":{"line":26,"column":66}},"line":26}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},{"start":{"line":14,"column":8},"end":{"line":16,"column":9}}],"line":14},"1":{"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":64}},"type":"binary-expr","locations":[{"start":{"line":14,"column":12},"end":{"line":14,"column":31}},{"start":{"line":14,"column":35},"end":{"line":14,"column":64}}],"line":14},"2":{"loc":{"start":{"line":19,"column":12},"end":{"line":21,"column":13}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":21,"column":13}},{"start":{"line":19,"column":12},"end":{"line":21,"column":13}}],"line":19},"3":{"loc":{"start":{"line":26,"column":25},"end":{"line":26,"column":66}},"type":"cond-expr","locations":[{"start":{"line":26,"column":58},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":66}}],"line":26}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/ostracoda/Desktop/qenta/src/lib/fingerpring.ts","sources":["/Users/ostracoda/Desktop/qenta/src/lib/fingerpring.ts"],"names":[],"mappings":";;;AAAA,mCAAmC;AAGnC,MAAa,WAAW;IAuCf,MAAM,CAAC,YAAY,CAAC,MAAc;QACvC,OAAO,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAA;IACvC,CAAC;IAOM,MAAM,CAAC,gBAAgB,CAAC,cAAsB;QACnD,IAAI,CAAC,eAAe,GAAG,cAAc,CAAA;IACvC,CAAC;IAOM,MAAM,CAAC,QAAQ,CAAI,IAAO;QAC/B,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAA;QACrC,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;YACxD,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAA;SACvC;QACD,MAAM,IAAI,GAAG,mBAAU,CAAC,IAAI,CAAC,qBAAqB,EAAE,MAAM,CAAC,CAAA;QAG3D,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;YACxC,IAAI,OAAO,UAAU,CAAC,CAAC,CAAC,KAAK,WAAW,EAAE;gBACxC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAA;aACtC;QACH,CAAC,CAAC,CAAA;QAEF,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,uBAAuB,EAAE,EAAE,EAAE,CAAC,CAAA;QAG5D,MAAM,UAAU,GAAG,CAAC,oBAAoB,CAAC,CAAA;QACzC,MAAM,uBAAuB,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;aAC9C,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAE,GAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;aACnE,IAAI,CAAC,GAAG,CAAW,CAAA;QAEtB,IAAI,CAAC,MAAM,CAAC,uBAAuB,CAAC,CAAA;QAEpC,MAAM,eAAe,GAAG;YACtB,uBAAuB,EAAE,uBAAuB;YAChD,kBAAkB,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;SACvC,CAAA;QAED,MAAM,sBAAsB,GAAG;YAC7B,GAAG,IAAI;YACP,GAAG,eAAe;SACkB,CAAA;QACtC,OAAO,sBAAsB,CAAA;IAC/B,CAAC;;AA3FH,kCA4FC;AAxFwB,8BAAkB,GAAG,KAAK,CAAA;AAM1B,iCAAqB,GAAG,QAAQ,CAAA;AAMhC,sCAA0B,GAAG,aAAa,CAAA;AAQhD,2BAAe,GAAG,WAAW,CAAC,qBAAqB,CAAA;AAQ1C,0BAAc,GAAG,KAAK,CAAA","sourcesContent":["import { createHmac } from 'crypto'\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { entryTransactionResult } from '../client/tranable.type'\nexport class Fingerprint {\n  /**\n   * @var string\n   */\n  public static readonly HASH_ALGORITHM_MD5 = 'md5'\n\n  /**\n   *\n   * @var string\n   */\n  public static readonly HASH_ALGORITHM_SHA512 = 'sha512'\n\n  /**\n   *\n   * @var string\n   */\n  public static readonly HASH_ALGORITHM_HMAC_SHA512 = 'hmac_sha512'\n\n  /**\n   * Hash algorithm\n   *\n   * @staticvar string\n   * @internal\n   */\n  protected static _HASH_ALGORITHM = Fingerprint.HASH_ALGORITHM_SHA512\n\n  /**\n   * Hash algorithm\n   *\n   * @staticvar boolean\n   * @internal\n   */\n  protected static readonly _STRIP_SLASHES = false\n\n  /**\n   * use stripslashes for fingerprint generate methods\n   *\n   * @param string string\n   */\n  public static stripSlashes(string: string): string {\n    return string.replace(/\\\\(.)/gm, '1')\n  }\n  /**\n   * Sets the hash algorithm\n   *\n   * @param string hashAlgorithm\n   */\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  public static setHashAlgorithm(sHashAlgorithm: string) {\n    this._HASH_ALGORITHM = sHashAlgorithm\n  }\n\n  /**\n   * generates an Fingerprint-string\n   *\n   * @param <T> data\n   */\n  public static generate<T>(data: T): entryTransactionResult {\n    const secret = Object(data)['secret']\n    if (secret.length === 0 && typeof secret === 'undefined') {\n      throw new Error('Secret key is empty')\n    }\n    const hash = createHmac(this.HASH_ALGORITHM_SHA512, secret)\n\n    // hash the order field data\n    Object.entries(data).forEach(orderField => {\n      if (typeof orderField[1] !== 'undefined') {\n        hash.update(orderField[1].toString())\n      }\n    })\n\n    Object.assign(Object(data), { requestFingerprintOrder: '' })\n\n    // Skip the requestFingerprint parameter. it is not part of the fingerprint\n    const skipFields = ['requestFingerprint']\n    const requestFingerprintOrder = Object.keys(data)\n      .map(key => (skipFields.indexOf(key) === -1 ? (key as string) : ''))\n      .join(',') as string\n\n    hash.update(requestFingerprintOrder)\n\n    const fingerPrintData = {\n      requestFingerprintOrder: requestFingerprintOrder,\n      requestFingerprint: hash.digest('hex'),\n    }\n\n    const entryTransactionResult = {\n      ...data,\n      ...fingerPrintData,\n    } as unknown as entryTransactionResult\n    return entryTransactionResult\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b3ebfe2d0940ef91301c6278da575dc1ace13294","contentHash":"ec768fd06fe0636f92368deb5bf063edf5fccbfbd7310ee2c68a43ba43293a08"},"/Users/ostracoda/Desktop/qenta/src/config.type.ts":{"path":"/Users/ostracoda/Desktop/qenta/src/config.type.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/ostracoda/Desktop/qenta/src/config.type.ts","sources":["/Users/ostracoda/Desktop/qenta/src/config.type.ts"],"names":[],"mappings":"","sourcesContent":["import { RequestInit } from 'node-fetch'\n\nexport type Config = {\n  baseUrl?: string\n  http?: RequestInit\n  customerId?: string\n  language?: string\n  shopId?: string\n  secret?: string\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3f38db349db6c21dab9540aee1c3e772e20af50f","contentHash":"90a4df0248acdb8b48cd3da58f81946fca485b1407809d9233bf2e1f5b69d7c8"},"/Users/ostracoda/Desktop/qenta/src/client.type.ts":{"path":"/Users/ostracoda/Desktop/qenta/src/client.type.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/ostracoda/Desktop/qenta/src/client.type.ts","sources":["/Users/ostracoda/Desktop/qenta/src/client.type.ts"],"names":[],"mappings":"","sourcesContent":["export type Result = {\n  ErrCode?: string\n  ErrInfo?: string\n}\n\nexport type UnknownParams = {\n  [key: string]: unknown\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"96a982048e556808ef0db238d3bd45484cec0c1c","contentHash":"bced2eba9e35b33b317f477b5c0f8ed3141507ca74be92314536d126ec2e4b3e"},"/Users/ostracoda/Desktop/qenta/src/client/tranable.type.ts":{"path":"/Users/ostracoda/Desktop/qenta/src/client/tranable.type.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/ostracoda/Desktop/qenta/src/client/tranable.type.ts","sources":["/Users/ostracoda/Desktop/qenta/src/client/tranable.type.ts"],"names":[],"mappings":"","sourcesContent":["import { Result } from '../client.type'\n\nexport type entryTransactionArgs = {\n  pluginVersion: string\n  confirmUrl: string\n  orderReference?: string\n  amount: number\n  currency: string\n  paymentType: string\n  orderDescription?: string\n  successUrl: string\n  pendingUrl: string\n  cancelUrl: string\n  failureUrl: string\n  serviceUrl: string\n  consumerMerchantCrmId: string\n  consumerIpAddress: string\n  consumerUserAgent: string\n  customerStatement: string\n}\n\nexport type entryTransactionResult = Result & {\n  customerId: string\n  shopId: string\n  language: string\n  secret: string\n  pluginVersion: string\n  confirmUrl: string\n  orderReference?: string\n  amount: number\n  currency: string\n  paymentType: string\n  orderDescription?: string\n  successUrl: string\n  pendingUrl: string\n  cancelUrl: string\n  failureUrl: string\n  serviceUrl: string\n  consumerMerchantCrmId: string\n  consumerIpAddress: string\n  consumerUserAgent: string\n  customerStatement: string\n  requestFingerprintOrder: string\n  requestFingerprint: string\n}\n\nexport type execTransactionArgs = {\n  customerId: string\n  shopId: string\n  language: string\n  secret: string\n  pluginVersion: string\n  confirmUrl: string\n  orderReference?: string\n  amount: number\n  currency: string\n  paymentType: string\n  orderDescription?: string\n  successUrl: string\n  pendingUrl: string\n  cancelUrl: string\n  failureUrl: string\n  serviceUrl: string\n  consumerMerchantCrmId: string\n  consumerIpAddress: string\n  consumerUserAgent: string\n  customerStatement: string\n  requestFingerprintOrder: string\n  requestFingerprint: string\n}\n\nexport type execTransactionResult = Result & {\n  redirectUrl: string\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cd6921021d22958eadedd0175fe5db7286dd1cbe","contentHash":"73b26f28b42a1b60dcae4a20eaf6fe0793e9330a149c3e02f56be789d38f94c9"}}